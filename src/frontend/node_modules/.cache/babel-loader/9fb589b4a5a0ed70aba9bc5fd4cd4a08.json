{"ast":null,"code":"import _slicedToArray from\"/home/bartekj/diet-planner/src/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// import './App.css';\nimport{BrowserRouter,Routes,Route,Link}from\"react-router-dom\";import React,{useState,useEffect,useCallback}from'react';import{useDispatch,useSelector}from\"react-redux\";import{logout}from\"./slices/auth\";import EventBus from\"./common/EventBus\";import Home from'./components/Home';import Login from'./components/Login';import Register from'./components/Register';import BoardAdmin from\"./components/BoardAdmin\";import BoardModerator from\"./components/BoardModerator\";import Profile from\"./components/Profile\";import UserPanel from\"./components/UserPanel\";import logo from'./img/4306a6b70354473aaaeb549b78efa6b1.png';import Favourites from\"./components/Favourites\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModeratorBoard=_useState2[0],setModeratorBoard=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showAdminBoard=_useState4[0],setShowAdminBoard=_useState4[1];var _useSelector=useSelector(function(state){return state.auth;}),currentUser=_useSelector.user;var dispatch=useDispatch();var logOut=useCallback(function(){dispatch(logout());},[dispatch]);useEffect(function(){if(currentUser){setModeratorBoard(currentUser.roles.includes(\"ROLE_MODERATOR\"));setShowAdminBoard(currentUser.roles.includes(\"ROLE_ADMIN\"));}else{setShowAdminBoard(false);setModeratorBoard(false);}EventBus.on(\"logout\",function(){logOut();});return function(){EventBus.remove(\"logout\");};},[currentUser,logOut]);return/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"img\",{height:\"84px\",src:logo,alt:\"Logo\"})}),/*#__PURE__*/_jsxs(\"ul\",{children:[currentUser?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/profile\",children:\"Profile\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/login\",onClick:logOut,children:\"LogOut\"})})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"register\",children:\"Sign Up\"})})]}),currentUser&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/favourites\",children:\"Favourites\"})}),currentUser&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/calc\",children:\"Macro Calc\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/home\",children:\"Home\"})}),showModeratorBoard&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/mod\",children:\"Moderator Board\"})}),showAdminBoard&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/admin\",children:\"Admin Board\"})})]})]}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/home\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{})}),/*#__PURE__*/_jsx(Route,{path:\"/calc\",element:/*#__PURE__*/_jsx(UserPanel,{})}),/*#__PURE__*/_jsx(Route,{path:\"/favourites\",element:/*#__PURE__*/_jsx(Favourites,{})}),/*#__PURE__*/_jsx(Route,{path:\"/mod\",element:/*#__PURE__*/_jsx(BoardModerator,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(BoardAdmin,{})})]})]});};export default App;","map":{"version":3,"names":["BrowserRouter","Routes","Route","Link","React","useState","useEffect","useCallback","useDispatch","useSelector","logout","EventBus","Home","Login","Register","BoardAdmin","BoardModerator","Profile","UserPanel","logo","Favourites","App","showModeratorBoard","setModeratorBoard","showAdminBoard","setShowAdminBoard","state","auth","currentUser","user","dispatch","logOut","roles","includes","on","remove"],"sources":["/home/bartekj/diet-planner/src/frontend/src/App.js"],"sourcesContent":["// import './App.css';\nimport { BrowserRouter, Routes, Route, Link } from \"react-router-dom\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport { logout } from \"./slices/auth\";\nimport EventBus from \"./common/EventBus\";\nimport Home from './components/Home';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport BoardAdmin from \"./components/BoardAdmin\";\nimport BoardModerator from \"./components/BoardModerator\";\nimport Profile from \"./components/Profile\";\nimport UserPanel from \"./components/UserPanel\";\nimport logo from './img/4306a6b70354473aaaeb549b78efa6b1.png';\nimport Favourites from \"./components/Favourites\";\n\nconst App = () => {\n    const [showModeratorBoard, setModeratorBoard] = useState(false);\n    const [showAdminBoard, setShowAdminBoard] = useState(false);\n\n    const {user: currentUser} = useSelector((state) => state.auth)\n    const dispatch = useDispatch();\n\n    const logOut = useCallback(() => {\n        dispatch(logout());\n    }, [dispatch]);\n\n    useEffect(() => {\n        if (currentUser) {\n            setModeratorBoard(currentUser.roles.includes(\"ROLE_MODERATOR\"));\n            setShowAdminBoard(currentUser.roles.includes(\"ROLE_ADMIN\"));\n        } else {\n            setShowAdminBoard(false);\n            setModeratorBoard(false);\n        }\n\n        EventBus.on(\"logout\", () => {\n            logOut();\n        });\n\n        return () => {\n            EventBus.remove(\"logout\");\n        };\n    }, [currentUser, logOut]);\n\n\n  return (\n          <BrowserRouter>\n                  <nav>\n                      <Link to={\"/\"}>\n                          <img height=\"84px\" src={logo} alt=\"Logo\" />\n                      </Link>\n                      <ul>\n\n\n\n                          {currentUser ? (\n                              <div>\n                                  <li>\n                                      <Link to={\"/profile\"}>\n                                          Profile\n                                      </Link>\n                                  </li>\n                                  <li>\n                                      <a href=\"/login\" onClick={logOut}>\n                                          LogOut\n                                      </a>\n                                  </li>\n                              </div>\n                          ) : (\n                              <div>\n                                  <li>\n                                      <Link to={\"/login\"}>\n                                          Login\n                                      </Link>\n                                  </li>\n                                  <li>\n                                      <Link to={\"register\"}>\n                                          Sign Up\n                                      </Link>\n                                  </li>\n                              </div>\n                          )}\n\n                          {currentUser && (\n                              <li>\n                                  <Link to={\"/favourites\"}>\n                                      Favourites\n                                  </Link>\n                              </li>\n                          )}\n\n                          {currentUser && (\n                              <li>\n                                  <Link to={\"/calc\"}>\n                                      Macro Calc\n                                  </Link>\n                              </li>\n                          )}\n\n                          <li>\n                              <Link to={\"/home\"}>\n                                  Home\n                              </Link>\n                          </li>\n\n                          {showModeratorBoard && (\n                              <li>\n                                  <Link to={\"/mod\"}>\n                                      Moderator Board\n                                  </Link>\n                              </li>\n                          )}\n\n                          {showAdminBoard && (\n                              <li>\n                                  <Link to={\"/admin\"}>\n                                      Admin Board\n                                  </Link>\n                              </li>\n                          )}\n\n                      </ul>\n                  </nav>\n\n                      <Routes>\n                          <Route path=\"/\" element={<Home/>} />\n                          <Route path=\"/home\" element={<Home/>} />\n                          <Route path=\"/login\" element={<Login/>} />\n                          <Route path=\"/register\" element={<Register/>} />\n                          <Route path=\"/profile\" element={<Profile/>} />\n                          <Route path=\"/calc\" element={<UserPanel/>} />\n                          <Route path=\"/favourites\" element={<Favourites/>} />\n                          <Route path=\"/mod\" element={<BoardModerator/>} />\n                          <Route path=\"/admin\" element={<BoardAdmin/>} />\n                      </Routes>\n\n          </BrowserRouter>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
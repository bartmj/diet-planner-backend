{"ast":null,"code":"import _slicedToArray from\"/home/bartekj/diet-planner/src/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Formik,Field,Form,ErrorMessage}from\"formik\";import*as Yup from\"yup\";import{register}from\"../slices/auth\";import{clearMessage}from\"../slices/message\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),successful=_useState2[0],setSuccessful=_useState2[1];var _useSelector=useSelector(function(state){return state.message;}),message=_useSelector.message;var dispatch=useDispatch();useEffect(function(){dispatch(clearMessage());},[dispatch]);var initialValues={username:\"\",email:\"\",password:\"\"};var validationSchema=Yup.object().shape({username:Yup.string().test(\"len\",\"The username must be between 3 and 20 characters.\",function(val){return val&&val.toString().length>=3&&val.toString().length<=20;}).required(\"This field is required\"),email:Yup.string().email(\"This is not a valid email.\").required(\"This field is required!\"),password:Yup.string().test(\"len\",\"The password must be between 6 nad 40 characters.\",function(val){return val&&val.toString().length>=6&&val.toString().length<=40;}).required(\"This field is required!\")});var handleRegister=function handleRegister(formValue){var username=formValue.username,email=formValue.email,password=formValue.password;setSuccessful(false);dispatch(register({username:username,email:email,password:password})).unwrap().then(function(){setSuccessful(true);}).catch(function(){setSuccessful(false);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign up\"}),/*#__PURE__*/_jsx(Formik,{initialValues:initialValues,validationSchema:validationSchema,onSubmit:handleRegister,children:/*#__PURE__*/_jsx(Form,{children:!successful&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Field,{name:\"username\",type:\"text\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"username\",component:\"div\",className:\"error-msg\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Field,{name:\"email\",type:\"text\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"email\",component:\"div\",className:\"error-msg\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Field,{name:\"password\",type:\"password\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"password\",component:\"div\",className:\"error-msg\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Sign Up\"})})]})})})]}),message&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:message})})]});};export default Register;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","Formik","Field","Form","ErrorMessage","Yup","register","clearMessage","Register","successful","setSuccessful","state","message","dispatch","initialValues","username","email","password","validationSchema","object","shape","string","test","val","toString","length","required","handleRegister","formValue","unwrap","then","catch"],"sources":["/home/bartekj/diet-planner/src/frontend/src/components/Register.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Formik, Field, Form, ErrorMessage } from \"formik\";\nimport * as Yup from \"yup\";\n\nimport { register } from \"../slices/auth\";\nimport { clearMessage } from \"../slices/message\";\n\nconst Register = () => {\n    const [successful, setSuccessful] = useState(false);\n\n    const { message } = useSelector((state) => state.message);\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(clearMessage());\n    }, [dispatch]);\n\n    const initialValues = {\n        username: \"\",\n        email: \"\",\n        password: \"\"\n    };\n\n    const validationSchema = Yup.object().shape({\n        username: Yup.string()\n            .test(\n                \"len\",\n                \"The username must be between 3 and 20 characters.\",\n                (val) =>\n                    val &&\n                    val.toString().length >= 3 &&\n                    val.toString().length <= 20\n            )\n            .required(\"This field is required\"),\n        email: Yup.string()\n            .email(\"This is not a valid email.\")\n            .required(\"This field is required!\"),\n        password: Yup.string()\n            .test(\n                \"len\",\n                \"The password must be between 6 nad 40 characters.\",\n                (val) =>\n                    val &&\n                    val.toString().length >= 6 &&\n                    val.toString().length <= 40\n            )\n            .required(\"This field is required!\")\n    });\n\n    const handleRegister = (formValue) => {\n        const { username, email, password } = formValue;\n\n        setSuccessful(false);\n\n        dispatch(register({ username, email, password }))\n            .unwrap()\n            .then(() => {\n                setSuccessful(true)\n            })\n            .catch(() => {\n                setSuccessful(false);\n        });\n    };\n\n    return (\n        <div className=\"container\">\n            <div>\n                <h1>Sign up</h1>\n                <Formik\n                    initialValues={initialValues}\n                    validationSchema={validationSchema}\n                    onSubmit={handleRegister}\n                >\n                    <Form>\n                        {!successful && (\n                            <div>\n                                <div className=\"form-group\">\n                                    <label>Username </label>\n                                    <br></br>\n                                    <Field name=\"username\" type=\"text\" ></Field>\n                                    <ErrorMessage name=\"username\" component=\"div\" className=\"error-msg\" />\n                                </div>\n                                <div className=\"form-group\">\n                                    <label>Email </label>\n                                    <br></br>\n                                    <Field name=\"email\" type=\"text\" ></Field>\n                                    <ErrorMessage name=\"email\" component=\"div\" className=\"error-msg\" />\n                                </div>\n                                <div className=\"form-group\">\n                                    <label>Password </label>\n                                    <br></br>\n                                    <Field name=\"password\" type=\"password\" ></Field>\n                                    <ErrorMessage name=\"password\" component=\"div\" className=\"error-msg\" />\n                                </div>\n                                <div>\n                                    <button type=\"submit\">Sign Up</button>\n                                </div>\n                            </div>\n                        )}\n                    </Form>\n                </Formik>\n            </div>\n\n            {message && (\n                <div>\n                    <div>\n                        {message}\n                    </div>\n                </div>\n            )}\n\n        </div>\n    );\n};\n\nexport default Register;\n\n\n\n\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}